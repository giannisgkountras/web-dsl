webpage CarMonitor
    author: "Giannis Gkountras"
    version: "1.0"
    description: "A car monitoring dashboard"
    navbar: true

    //============ Connections =============//
    
    API backendAPI
        host: "0.0.0.0"
        port: 8321
    end

    Websocket backendWebsocket
        host: "192.168.1.6"
        port: 8080
    end

    Broker<MQTT> CarBroker
        host: "192.168.1.6"
        port: 1883
    end

    //============ Specific endpoints / topics / queries =============//

    BrokerTopic dataTopic
        connection: CarBroker
        topic: "data"
    end

    Entity CarData
        source: dataTopic
        attributes:
            - data: list
    end


    Screen Home
        title: "Home"
        url: '/'

        row
            col
                for this.metrics in entity CarData
                    use Text with data this.name
            endcol
            col
                for this.metrics in entity CarData
                    use Gauge with data this.value
            endcol
            col
                for this.metrics in entity CarData
                    use Image width: 100 height: 100
                    with data this.frame
            endcol
        endrow
        row
            col
                Component dataPublisher
                    type: Publish
                        broker: CarBroker
                end
            endcol
        endrow
    end



    // data to test

//     {
//   "metrics": [{"name":"First Name", "value": 30, "frame":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAABlBMVEX///+/v7+jQ3Y5AAAADklEQVQI12P4AIX8EAgALgAD/aNpbtEAAAAASUVORK5CYII"}, {"name":"Second Name", "value": 90, "frame":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAABlBMVEX///+/v7+jQ3Y5AAAADklEQVQI12P4AIX8EAgALgAD/aNpbtEAAAAASUVORK5CYII"}]
// }